
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>sasoptpy.components &#8212; sasoptpy 0.2.1 documentation</title>
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/sasoptpy.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/url.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <script src="../../../../_static/js/version.js"></script>
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../http-routingtable.html" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">sasoptpy 0.2.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for sasoptpy.components</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># encoding: utf-8</span>
<span class="c1">#</span>
<span class="c1"># Copyright SAS Institute</span>
<span class="c1">#</span>
<span class="c1">#  Licensed under the Apache License, Version 2.0 (the License);</span>
<span class="c1">#  you may not use this file except in compliance with the License.</span>
<span class="c1">#  You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#      http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1">#  Unless required by applicable law or agreed to in writing, software</span>
<span class="c1">#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1">#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1">#  See the License for the specific language governing permissions and</span>
<span class="c1">#  limitations under the License.</span>
<span class="c1">#</span>

<span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">OrderedDict</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="k">import</span> <span class="n">product</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="k">import</span> <span class="n">copysign</span><span class="p">,</span> <span class="n">inf</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="k">import</span> <span class="n">GeneratorType</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">sasoptpy.utils</span>


<div class="viewcode-block" id="Expression"><a class="viewcode-back" href="../../api/generated/sasoptpy.Expression.html#sasoptpy.Expression">[docs]</a><span class="k">class</span> <span class="nc">Expression</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a mathematical expression to represent model components</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    exp : Expression, optional</span>
<span class="sd">        An existing expression where arguments are being passed</span>
<span class="sd">    name : string, optional</span>
<span class="sd">        A local name for the expression</span>
<span class="sd">    temp : boolean, optional</span>
<span class="sd">        A boolean shows whether expression is temporary or permanent</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; x = so.Variable(name=&#39;x&#39;)</span>
<span class="sd">    &gt;&gt;&gt; y = so.VariableGroup(3, name=&#39;y&#39;)</span>
<span class="sd">    &gt;&gt;&gt; e = so.Expression(exp=x + 3 * y[0] - 5 * y[1], name=&#39;exp1&#39;)</span>
<span class="sd">    &gt;&gt;&gt; print(e)</span>
<span class="sd">     -  5.0 * y[1]  +  3.0 * y[0]  +  x</span>
<span class="sd">    &gt;&gt;&gt; print(repr(e))</span>
<span class="sd">    sasoptpy.Expression(exp =  -  5.0 * y[1]  +  3.0 * y[0]  +  x ,</span>
<span class="sd">                        name=&#39;exp1&#39;)</span>

<span class="sd">    &gt;&gt;&gt; sales = so.Variable(name=&#39;sales&#39;)</span>
<span class="sd">    &gt;&gt;&gt; material = so.Variable(name=&#39;material&#39;)</span>
<span class="sd">    &gt;&gt;&gt; profit = 5 * sales - 3 * material</span>
<span class="sd">    &gt;&gt;&gt; print(profit)</span>
<span class="sd">     5.0 * sales  -  3.0 * material</span>
<span class="sd">    &gt;&gt;&gt; print(repr(profit))</span>
<span class="sd">    sasoptpy.Expression(exp =  5.0 * sales  -  3.0 * material , name=None)</span>

<span class="sd">    &gt;&gt;&gt; import sasoptpy.math as sm</span>
<span class="sd">    &gt;&gt;&gt; f = sm.sin(x) + sm.min(y[1],1) ** 2</span>
<span class="sd">    &gt;&gt;&gt; print(type(f))</span>
<span class="sd">    &lt;class &#39;sasoptpy.components.Expression&#39;&gt;</span>
<span class="sd">    &gt;&gt;&gt; print(f)</span>
<span class="sd">    sin(x) + (min(y[1] , 1)) ** (2)</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    * Two other classes (:class:`Variable` and :class:`Constraint`) are</span>
<span class="sd">      subclasses of this class.</span>
<span class="sd">    * Expressions are created automatically after linear math operations</span>
<span class="sd">      with variables.</span>
<span class="sd">    * An expression object can be called when defining constraints and other</span>
<span class="sd">      expressions.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">temp</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">check_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;expr&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_objorder</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dual</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">exp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">mylc</span> <span class="ow">in</span> <span class="n">exp</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">mylc</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">exp</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">mylc</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">np</span><span class="o">.</span><span class="n">issubdtype</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">exp</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">number</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">exp</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WARNING: An invalid type is passed to create an &#39;</span> <span class="o">+</span>
                      <span class="s1">&#39;Expression: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">exp</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_temp</span> <span class="o">=</span> <span class="n">temp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_operator</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_arguments</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_iterkey</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_conditions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keep</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="Expression.copy"><a class="viewcode-back" href="../../api/generated/sasoptpy.Expression.copy.html#sasoptpy.Expression.copy">[docs]</a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a copy of the :class:`Expression` object</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : string, optional</span>
<span class="sd">            Name for the copy</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        r : Expression</span>
<span class="sd">            Copy of the object</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; x = so.Variable(name=&#39;x&#39;)</span>
<span class="sd">        &gt;&gt;&gt; y = so.VariableGroup(1, name=&#39;y&#39;)</span>
<span class="sd">        &gt;&gt;&gt; e = so.Expression(7 * x - y[0], name=&#39;e&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(repr(e))</span>
<span class="sd">        sasoptpy.Expression(exp =  -  y[0]  +  7.0 * x , name=&#39;e&#39;)</span>
<span class="sd">        &gt;&gt;&gt; f = e.copy(name=&#39;f&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(repr(f))</span>
<span class="sd">        sasoptpy.Expression(exp =  -  y[0]  +  7.0 * x , name=&#39;f&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">mylc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">:</span>
            <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">mylc</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">mylc</span><span class="p">])</span>
        <span class="n">r</span><span class="o">.</span><span class="n">_operator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operator</span>
        <span class="n">r</span><span class="o">.</span><span class="n">_iterkey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iterkey</span>
        <span class="n">r</span><span class="o">.</span><span class="n">_abstract</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span>
        <span class="n">r</span><span class="o">.</span><span class="n">_conditionts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_conditions</span>
        <span class="k">return</span> <span class="n">r</span></div>

<div class="viewcode-block" id="Expression.get_value"><a class="viewcode-back" href="../../api/generated/sasoptpy.Expression.get_value.html#sasoptpy.Expression.get_value">[docs]</a>    <span class="k">def</span> <span class="nf">get_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates and returns the value of the linear expression</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        v : float</span>
<span class="sd">            Value of the expression</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; sales = so.Variable(name=&#39;sales&#39;, init=10)</span>
<span class="sd">        &gt;&gt;&gt; material = so.Variable(name=&#39;material&#39;, init=3)</span>
<span class="sd">        &gt;&gt;&gt; profit = so.Expression(5 * sales - 3 * material)</span>
<span class="sd">        &gt;&gt;&gt; print(profit.get_value())</span>
<span class="sd">        41</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">mylc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">mylc</span><span class="p">][</span><span class="s1">&#39;ref&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mylc</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                    <span class="n">v</span> <span class="o">+=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">_evaluate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">mylc</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">v</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">mylc</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">*</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">mylc</span><span class="p">][</span><span class="s1">&#39;ref&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">mylc</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operator</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">sasoptpy.math</span> <span class="k">as</span> <span class="nn">sm</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arguments</span><span class="p">:</span>
                    <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">Expression</span><span class="p">)</span> <span class="k">else</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arguments</span><span class="p">]</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">func_equivalent</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_operator</span><span class="p">](</span><span class="n">v</span><span class="p">,</span> <span class="o">*</span><span class="n">vals</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">func_equivalent</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_operator</span><span class="p">](</span><span class="n">v</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_arguments</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR: Unknown operator: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_operator</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">get_dual</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the dual value</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dual : float</span>
<span class="sd">            Dual value of the variable</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dual</span>

<div class="viewcode-block" id="Expression.set_name"><a class="viewcode-back" href="../../api/generated/sasoptpy.Expression.set_name.html#sasoptpy.Expression.set_name">[docs]</a>    <span class="k">def</span> <span class="nf">set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the name of the expression</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : string</span>
<span class="sd">            Name of the expression</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        name : string</span>
<span class="sd">            Name of the expression after resolving conflicts</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; x = so.Variable(name=&#39;x&#39;)</span>
<span class="sd">        &gt;&gt;&gt; e = x**2 + 2*x + 1</span>
<span class="sd">        &gt;&gt;&gt; e.set_name(&#39;expansion&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
            <span class="c1"># Expression has already a name and if no name is passed</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
        <span class="n">nd</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_namedict</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="ow">in</span> <span class="n">nd</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">nd</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">]</span>
        <span class="n">safe_name</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">check_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;expr&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">and</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">safe_name</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;NOTE: Name </span><span class="si">{}</span><span class="s1"> is changed to </span><span class="si">{}</span><span class="s1"> to prevent a conflict&#39;</span>
                  <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">safe_name</span><span class="p">))</span>
        <span class="n">order</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_objorder&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objorder</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_objorder</span> <span class="o">=</span> <span class="n">order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">safe_name</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span></div>

<div class="viewcode-block" id="Expression.get_name"><a class="viewcode-back" href="../../api/generated/sasoptpy.Expression.get_name.html#sasoptpy.Expression.get_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the name of the expression</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        name : string</span>
<span class="sd">            Name of the expression</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; m = so.Model()</span>
<span class="sd">        &gt;&gt;&gt; var1 = m.add_variables(name=&#39;x&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(var1.get_name())</span>
<span class="sd">        x</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span></div>

<div class="viewcode-block" id="Expression.set_permanent"><a class="viewcode-back" href="../../api/generated/sasoptpy.Expression.set_permanent.html#sasoptpy.Expression.set_permanent">[docs]</a>    <span class="k">def</span> <span class="nf">set_permanent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts a temporary expression into a permanent one</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : string, optional</span>
<span class="sd">            Name of the expression</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        name : string</span>
<span class="sd">            Name of the expression in the namespace</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">check_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;expr&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_objorder</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_temp</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span></div>

<div class="viewcode-block" id="Expression._expr"><a class="viewcode-back" href="../../api/generated/sasoptpy.Expression._expr.html#sasoptpy.Expression._expr">[docs]</a>    <span class="k">def</span> <span class="nf">_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates the OPTMODEL compatible string representation of the object.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; x = so.Variable(name=&#39;x&#39;)</span>
<span class="sd">        &gt;&gt;&gt; y = so.Variable(name=&#39;y&#39;)</span>
<span class="sd">        &gt;&gt;&gt; f = x + y ** 2</span>
<span class="sd">        &gt;&gt;&gt; print(f)</span>
<span class="sd">        x + (y) ** (2)</span>
<span class="sd">        &gt;&gt;&gt; print(f._expr())</span>
<span class="sd">        x + (y) ^ (2)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Add the operator first if exists</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operator</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operator</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iterkey</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operator</span> <span class="o">==</span> <span class="s1">&#39;sum&#39;</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">_to_optmodel_loop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_iterkey</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;(&#39;</span>

        <span class="n">itemcnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">firstel</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># Add every element into string one by one</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">el</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]</span>
            <span class="n">ref</span> <span class="o">=</span> <span class="n">el</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">]</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">el</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;op&#39;</span><span class="p">)</span>
            <span class="n">csign</span> <span class="o">=</span> <span class="n">copysign</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

            <span class="c1"># Skip elements with 0 coefficient or constant</span>
            <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">idx</span> <span class="o">==</span> <span class="s1">&#39;CONST&#39;</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Append sign of the value unless it is positive and first</span>
            <span class="k">if</span> <span class="n">firstel</span> <span class="ow">and</span> <span class="n">csign</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">csign</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;+ &#39;</span>
            <span class="k">elif</span> <span class="n">csign</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;- &#39;</span>
            <span class="n">firstel</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="c1"># Add operand if exists, default is product</span>
            <span class="k">if</span> <span class="n">op</span><span class="p">:</span>
                <span class="n">optext</span> <span class="o">=</span> <span class="s1">&#39; </span><span class="si">{}</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">op</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">optext</span> <span class="o">=</span> <span class="s1">&#39; * &#39;</span>

            <span class="c1"># For a list of expressions, a recursive function is called</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">strlist</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">recursive_walk</span><span class="p">(</span>
                    <span class="n">ref</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="s1">&#39;_expr&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">strlist</span> <span class="o">=</span> <span class="p">[</span><span class="n">ref</span><span class="o">.</span><span class="n">_expr</span><span class="p">()]</span>
            <span class="k">if</span> <span class="n">optext</span> <span class="o">!=</span> <span class="s1">&#39; * &#39;</span><span class="p">:</span>
                <span class="n">strlist</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">stritem</span><span class="p">)</span>
                           <span class="k">for</span> <span class="n">stritem</span> <span class="ow">in</span> <span class="n">strlist</span><span class="p">]</span>

            <span class="c1"># Merge all elements in strlist together</span>
            <span class="n">refs</span> <span class="o">=</span> <span class="n">optext</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strlist</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">val</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">refs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">op</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> * (</span><span class="si">{}</span><span class="s1">) &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">val</span><span class="p">),</span> <span class="mi">12</span><span class="p">),</span> <span class="n">refs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> * </span><span class="si">{}</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">val</span><span class="p">),</span> <span class="mi">12</span><span class="p">),</span> <span class="n">refs</span><span class="p">)</span>

            <span class="n">itemcnt</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># CONST is always at the end</span>
        <span class="k">if</span> <span class="n">itemcnt</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span>
                            <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Constraint</span><span class="p">)):</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span>
            <span class="n">csign</span> <span class="o">=</span> <span class="n">copysign</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">csign</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;- &#39;</span>
            <span class="k">elif</span> <span class="n">firstel</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;+ &#39;</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>

        <span class="c1"># Close operator parentheses and add remaining elements</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operator</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arguments</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">_expr</span><span class="p">()</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;_expr&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arguments</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;)&#39;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">s</span></div>

<div class="viewcode-block" id="Expression.__repr__"><a class="viewcode-back" href="../../api/generated/sasoptpy.Expression.__repr__.html#sasoptpy.Expression.__repr__">[docs]</a>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a string representation of the object.</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; x = so.Variable(name=&#39;x&#39;)</span>
<span class="sd">        &gt;&gt;&gt; y = so.Variable(name=&#39;y&#39;)</span>
<span class="sd">        &gt;&gt;&gt; f = x + y ** 2</span>
<span class="sd">        &gt;&gt;&gt; print(repr(f))</span>
<span class="sd">        sasoptpy.Expression(exp = x + (y) ** (2), name=None)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;sasoptpy.Expression(&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;exp = </span><span class="si">{}</span><span class="s1">, name=</span><span class="se">\&#39;</span><span class="si">{}</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;exp = </span><span class="si">{}</span><span class="s1">, name=None&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;)&#39;</span>
        <span class="k">return</span> <span class="n">s</span></div>

    <span class="k">def</span> <span class="nf">_defn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expr</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_operator</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iterkey</span> <span class="o">!=</span> <span class="p">[]:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;{&#39;</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">i</span><span class="o">.</span><span class="n">_defn</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_iterkey</span><span class="p">)])</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;}&#39;</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;(&#39;</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expr</span><span class="p">()</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;)&#39;</span>
        <span class="k">return</span> <span class="n">s</span>

<div class="viewcode-block" id="Expression.__str__"><a class="viewcode-back" href="../../api/generated/sasoptpy.Expression.__str__.html#sasoptpy.Expression.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a representation string that is Python compatible</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; f = x + y ** 2</span>
<span class="sd">        &gt;&gt;&gt; print(str(f))</span>
<span class="sd">        x + (y) ** (2)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="n">itemcnt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">firstel</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operator</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_operator</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">el</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]</span>
            <span class="n">ref</span> <span class="o">=</span> <span class="n">el</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">]</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">el</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;op&#39;</span><span class="p">)</span>
            <span class="n">csign</span> <span class="o">=</span> <span class="n">copysign</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

            <span class="c1"># Skip elements with 0 coefficient or constant</span>
            <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">idx</span> <span class="o">==</span> <span class="s1">&#39;CONST&#39;</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Append sign of the value unless it is positive and first</span>
            <span class="k">if</span> <span class="n">firstel</span> <span class="ow">and</span> <span class="n">csign</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">csign</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;+ &#39;</span>
            <span class="k">elif</span> <span class="n">csign</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;- &#39;</span>
            <span class="n">firstel</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">if</span> <span class="n">op</span><span class="p">:</span>
                <span class="n">optext</span> <span class="o">=</span> <span class="s1">&#39; </span><span class="si">{}</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">_py_symbol</span><span class="p">(</span><span class="n">op</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">optext</span> <span class="o">=</span> <span class="s1">&#39; * &#39;</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">strlist</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">recursive_walk</span><span class="p">(</span>
                    <span class="n">ref</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="s1">&#39;__str__&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">strlist</span> <span class="o">=</span> <span class="p">[</span><span class="n">ref</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()]</span>
            <span class="k">if</span> <span class="n">optext</span> <span class="o">!=</span> <span class="s1">&#39; * &#39;</span><span class="p">:</span>
                <span class="n">strlist</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">stritem</span><span class="p">)</span>
                           <span class="k">for</span> <span class="n">stritem</span> <span class="ow">in</span> <span class="n">strlist</span><span class="p">]</span>

            <span class="n">refs</span> <span class="o">=</span> <span class="n">optext</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strlist</span><span class="p">)</span>
            <span class="n">refs</span> <span class="o">=</span> <span class="n">optext</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strlist</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">val</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">refs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">op</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> * (</span><span class="si">{}</span><span class="s1">) &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">val</span><span class="p">),</span> <span class="mi">12</span><span class="p">),</span> <span class="n">refs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> * </span><span class="si">{}</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">val</span><span class="p">),</span> <span class="mi">12</span><span class="p">),</span> <span class="n">refs</span><span class="p">)</span>
            <span class="n">itemcnt</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># CONST is always at the end</span>
        <span class="k">if</span> <span class="n">itemcnt</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span>
                            <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Constraint</span><span class="p">)):</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span>
            <span class="n">csign</span> <span class="o">=</span> <span class="n">copysign</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">csign</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;- &#39;</span>
            <span class="k">elif</span> <span class="n">firstel</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;+ &#39;</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operator</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iterkey</span><span class="p">:</span>
                <span class="n">forlist</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iterkey</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">SetIterator</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">_multi</span><span class="p">:</span>
                            <span class="n">forlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;for (</span><span class="si">{}</span><span class="s1">) in </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                <span class="n">i</span><span class="o">.</span><span class="n">_expr</span><span class="p">(),</span> <span class="n">i</span><span class="o">.</span><span class="n">_set</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">forlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;for </span><span class="si">{}</span><span class="s1"> in </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                <span class="n">i</span><span class="o">.</span><span class="n">_expr</span><span class="p">(),</span> <span class="n">i</span><span class="o">.</span><span class="n">_set</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">forlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;for </span><span class="si">{}</span><span class="s1"> in </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                            <span class="n">i</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">_set</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">forlist</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arguments</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arguments</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;)&#39;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">s</span></div>

    <span class="k">def</span> <span class="nf">_add_coef_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes value of a variable inside the :class:`Expression` object in</span>
<span class="sd">        place</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        var : Variable</span>
<span class="sd">            Variable object whose value will be changed</span>
<span class="sd">        key : string</span>
<span class="sd">            Name of the variable object</span>
<span class="sd">        value : float</span>
<span class="sd">            New value or the addition to the existing value of the variable</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="n">var</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>

<div class="viewcode-block" id="Expression.add"><a class="viewcode-back" href="../../api/generated/sasoptpy.Expression.add.html#sasoptpy.Expression.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">sign</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Combines two expressions and produces a new one</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : float or Expression</span>
<span class="sd">            Second expression or constant value to be added</span>
<span class="sd">        sign : int, optional</span>
<span class="sd">            Sign of the addition, 1 or -1</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        r : Expression</span>
<span class="sd">            Reference to the outcome of the operation</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        * This method is mainly for internal use.</span>
<span class="sd">        * Adding an expression is equivalent to calling this method:</span>
<span class="sd">          (x-y)+(3*x-2*y) and (x-y).add(3*x-2*y) are interchangeable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_temp</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">is</span> <span class="n">Expression</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Expression</span><span class="p">)</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">_temp</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">other</span>
                <span class="n">other</span> <span class="o">=</span> <span class="bp">self</span>
                <span class="n">sign</span> <span class="o">=</span> <span class="n">sign</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">()</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">set_name</span><span class="p">()]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">_operator</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">r</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">_abstract</span><span class="p">:</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_abstract</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">_operator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">:</span>
                        <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">sign</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">v</span><span class="p">])</span>
                        <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="n">sign</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">other</span><span class="o">.</span><span class="n">set_name</span><span class="p">()]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">sign</span><span class="p">,</span> <span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="n">other</span><span class="p">}</span>
            <span class="n">r</span><span class="o">.</span><span class="n">_conditions</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_conditions</span>
            <span class="n">r</span><span class="o">.</span><span class="n">_conditions</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">_conditions</span>
        <span class="k">elif</span> <span class="n">np</span><span class="o">.</span><span class="n">issubdtype</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">number</span><span class="p">):</span>
            <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">sign</span> <span class="o">*</span> <span class="n">other</span>
        <span class="k">return</span> <span class="n">r</span></div>

<div class="viewcode-block" id="Expression.mult"><a class="viewcode-back" href="../../api/generated/sasoptpy.Expression.mult.html#sasoptpy.Expression.mult">[docs]</a>    <span class="k">def</span> <span class="nf">mult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Multiplies the :class:`Expression` with a scalar value</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : Expression or int</span>
<span class="sd">            Second expression to be multiplied</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        r : Expression</span>
<span class="sd">            A new :class:`Expression` that represents the multiplication</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        * This method is mainly for internal use.</span>
<span class="sd">        * Multiplying an expression is equivalent to calling this method:</span>
<span class="sd">          3*(x-y) and (x-y).mult(3) are interchangeable.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">_abstract</span><span class="p">:</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_abstract</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">target</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">_linCoef</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">y</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">target</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                            <span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">y</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]}</span>
                    <span class="k">elif</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">target</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                                <span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="n">y</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">],</span> <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">y</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]}</span>
                    <span class="k">elif</span> <span class="n">y</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">target</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                                <span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">],</span> <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">y</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]}</span>
                    <span class="k">else</span><span class="p">:</span>  <span class="c1"># TODO indexing is not interchangable,</span>
                        <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;op&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">y</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;op&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">newkey</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">tuple_pack</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span>\
                                         <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">tuple_pack</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
                                <span class="n">target</span><span class="p">[</span><span class="n">newkey</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                                    <span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">]),</span>
                                    <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]}</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">newkey</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
                                <span class="n">x_actual</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">]</span>
                                <span class="k">if</span> <span class="s1">&#39;op&#39;</span> <span class="ow">in</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;op&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="n">x_actual</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                                <span class="n">y_actual</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">]</span>
                                <span class="k">if</span> <span class="s1">&#39;op&#39;</span> <span class="ow">in</span> <span class="n">y</span> <span class="ow">and</span> <span class="n">y</span><span class="p">[</span><span class="s1">&#39;op&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="n">y_actual</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                                <span class="n">target</span><span class="p">[</span><span class="n">newkey</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                                    <span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">x_actual</span><span class="p">,</span> <span class="n">y_actual</span><span class="p">],</span>
                                    <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">[</span><span class="s1">&#39;val&#39;</span><span class="p">]}</span>
            <span class="n">r</span><span class="o">.</span><span class="n">_conditions</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_conditions</span>
            <span class="n">r</span><span class="o">.</span><span class="n">_conditions</span> <span class="o">+=</span> <span class="n">other</span><span class="o">.</span><span class="n">_conditions</span>
            <span class="k">return</span> <span class="n">r</span>
        <span class="k">elif</span> <span class="n">np</span><span class="o">.</span><span class="n">issubdtype</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">number</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_temp</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">is</span> <span class="n">Expression</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">other</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">mylc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">mylc</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="n">other</span>
                <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span>
                <span class="k">return</span> <span class="n">r</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">other</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">r</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">mylc</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">:</span>
                        <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">mylc</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="n">other</span>
                <span class="k">return</span> <span class="n">r</span></div>

    <span class="c1"># def _tag_constraint(self, *argv):</span>
    <span class="c1">#     pass</span>

<div class="viewcode-block" id="Expression._relational"><a class="viewcode-back" href="../../api/generated/sasoptpy.Expression._relational.html#sasoptpy.Expression._relational">[docs]</a>    <span class="k">def</span> <span class="nf">_relational</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">direction_</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a logical relation between :class:`Expression` objects</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        other : Expression</span>
<span class="sd">            Expression on the other side of the relation wrt self</span>
<span class="sd">        direction_ : string</span>
<span class="sd">            Direction of the logical relation, either &#39;E&#39;, &#39;L&#39;, or &#39;G&#39;</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        generated_constraint : Constraint</span>
<span class="sd">            Constraint generated as a result of linear relation</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If the user provides both an upper and a lower bnd.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="n">direction_</span> <span class="o">==</span> <span class="s1">&#39;E&#39;</span><span class="p">:</span>
            <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">e</span><span class="o">.</span><span class="n">_add_coef_value</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;CONST&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="nb">min</span><span class="p">(</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">ranged_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">exp</span><span class="o">=</span><span class="n">e</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;E&#39;</span><span class="p">,</span>
                                           <span class="n">crange</span><span class="o">=</span><span class="nb">abs</span><span class="p">(</span><span class="n">other</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="k">return</span> <span class="n">ranged_constraint</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Variable</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_temp</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">is</span> <span class="n">Expression</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_operator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">r</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">r</span> <span class="o">+=</span> <span class="bp">self</span>
            <span class="c1">#  TODO r=self could be used whenever expression has no name</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">issubdtype</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">number</span><span class="p">):</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="n">other</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
                <span class="n">r</span> <span class="o">-=</span> <span class="n">other</span>
            <span class="n">generated_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">exp</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction_</span><span class="p">,</span>
                                              <span class="n">crange</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">generated_constraint</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">:</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_add_coef_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;ref&#39;</span><span class="p">],</span> <span class="n">v</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">issubdtype</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">number</span><span class="p">):</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="n">other</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">:</span>
                    <span class="n">r</span><span class="o">.</span><span class="n">_add_coef_value</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;ref&#39;</span><span class="p">],</span>
                                      <span class="n">v</span><span class="p">,</span> <span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">])</span>
            <span class="n">generated_constraint</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="n">exp</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction_</span><span class="p">,</span>
                                              <span class="n">crange</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">generated_constraint</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Expression._is_linear"><a class="viewcode-back" href="../../api/generated/sasoptpy.Expression._is_linear.html#sasoptpy.Expression._is_linear">[docs]</a>    <span class="k">def</span> <span class="nf">_is_linear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the expression is composed of linear components</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        is_linear : boolean</span>
<span class="sd">            True if the expression is linear, False otherwise</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; x = so.Variable()</span>
<span class="sd">        &gt;&gt;&gt; e = x*x</span>
<span class="sd">        &gt;&gt;&gt; print(e.is_linear())</span>
<span class="sd">        False</span>

<span class="sd">        &gt;&gt;&gt; f = x*x + x*x - 2*x*x + 5</span>
<span class="sd">        &gt;&gt;&gt; print(f.is_linear())</span>
<span class="sd">        True</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_clean</span><span class="p">()</span>

        <span class="c1"># Loop over components</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">val</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;op&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">val</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">val</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">_operator</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>

    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">keys_to_clean</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;CONST&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">keys_to_clean</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys_to_clean</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mult</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__pow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_permanent</span><span class="p">()</span>
        <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="s1">&#39;^&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">],</span>
            <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;op&#39;</span><span class="p">:</span> <span class="s1">&#39;^&#39;</span>
            <span class="p">}</span>
        <span class="n">r</span><span class="o">.</span><span class="n">_abstract</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">_abstract</span>
        <span class="k">return</span> <span class="n">r</span>

    <span class="k">def</span> <span class="nf">__rpow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">other</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="s1">&#39;^&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">],</span>
            <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;op&#39;</span><span class="p">:</span> <span class="s1">&#39;^&#39;</span>
            <span class="p">}</span>
        <span class="n">r</span><span class="o">.</span><span class="n">_abstract</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">_abstract</span>
        <span class="k">return</span> <span class="n">r</span>

    <span class="k">def</span> <span class="nf">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tmp</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">:</span>
            <span class="n">tmp</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="n">tmp</span>

    <span class="k">def</span> <span class="nf">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mult</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">issubdtype</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">number</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mult</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">other</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR: Float division by zero&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">],</span>
            <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;op&#39;</span><span class="p">:</span> <span class="s1">&#39;/&#39;</span>
            <span class="p">}</span>
        <span class="n">r</span><span class="o">.</span><span class="n">_abstract</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">_abstract</span>
        <span class="k">return</span> <span class="n">r</span>

    <span class="k">def</span> <span class="nf">__rtruediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">other</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">],</span>
            <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;op&#39;</span><span class="p">:</span> <span class="s1">&#39;/&#39;</span>
            <span class="p">}</span>
        <span class="n">r</span><span class="o">.</span><span class="n">_abstract</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">_abstract</span>
        <span class="k">return</span> <span class="n">r</span>

    <span class="k">def</span> <span class="nf">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relational</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relational</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s1">&#39;G&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relational</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rle__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relational</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s1">&#39;G&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__rge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relational</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mult</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">([</span><span class="bp">self</span><span class="p">])</span></div>


<div class="viewcode-block" id="Variable"><a class="viewcode-back" href="../../api/generated/sasoptpy.Variable.html#sasoptpy.Variable">[docs]</a><span class="k">class</span> <span class="nc">Variable</span><span class="p">(</span><span class="n">Expression</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates an optimization variable to be used inside models</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name : string</span>
<span class="sd">        Name of the variable</span>
<span class="sd">    vartype : string, optional</span>
<span class="sd">        Type of the variable</span>
<span class="sd">    lb : float, optional</span>
<span class="sd">        Lower bound of the variable</span>
<span class="sd">    ub : float, optional</span>
<span class="sd">        Upper bound of the variable</span>
<span class="sd">    init : float, optional</span>
<span class="sd">        Initial value of the variable</span>
<span class="sd">    abstract : boolean, optional</span>
<span class="sd">        Indicator of whether the variable is abstract or not</span>
<span class="sd">    shadow : boolean, optional</span>
<span class="sd">        Indicator of whether the variable is shadow or not\</span>
<span class="sd">        Used for internal purposes</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; x = so.Variable(name=&#39;x&#39;, lb=0, ub=20, vartype=so.CONT)</span>
<span class="sd">    &gt;&gt;&gt; print(repr(x))</span>
<span class="sd">    sasoptpy.Variable(name=&#39;x&#39;, lb=0, ub=20, vartype=&#39;CONT&#39;)</span>

<span class="sd">    &gt;&gt;&gt; y = so.Variable(name=&#39;y&#39;, init=1, vartype=so.INT)</span>
<span class="sd">    &gt;&gt;&gt; print(repr(y))</span>
<span class="sd">    sasoptpy.Variable(name=&#39;y&#39;, lb=0, ub=inf, init=1, vartype=&#39;INT&#39;)</span>

<span class="sd">    See also</span>
<span class="sd">    --------</span>
<span class="sd">    :func:`sasoptpy.Model.add_variable`</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">vartype</span><span class="o">=</span><span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">CONT</span><span class="p">,</span> <span class="n">lb</span><span class="o">=-</span><span class="n">inf</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">inf</span><span class="p">,</span>
                 <span class="n">init</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">abstract</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">shadow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">shadow</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">check_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="n">vartype</span>
        <span class="k">if</span> <span class="n">lb</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lb</span> <span class="o">=</span> <span class="o">-</span><span class="n">inf</span>
        <span class="k">if</span> <span class="n">ub</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ub</span> <span class="o">=</span> <span class="n">inf</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lb</span> <span class="o">=</span> <span class="n">lb</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ub</span> <span class="o">=</span> <span class="n">ub</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init</span> <span class="o">=</span> <span class="n">init</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init</span>
        <span class="k">if</span> <span class="n">vartype</span> <span class="o">==</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">BIN</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lb</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lb</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ub</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ub</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">shadow</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">name</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">))]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_objorder</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="o">=</span> <span class="n">key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_temp</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span> <span class="o">=</span> <span class="n">abstract</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_shadow</span> <span class="o">=</span> <span class="n">shadow</span>

    <span class="k">def</span> <span class="nf">_set_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="o">=</span> <span class="n">key</span>

<div class="viewcode-block" id="Variable.set_bounds"><a class="viewcode-back" href="../../api/generated/sasoptpy.Variable.set_bounds.html#sasoptpy.Variable.set_bounds">[docs]</a>    <span class="k">def</span> <span class="nf">set_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes bounds on a variable</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        lb : float</span>
<span class="sd">            Lower bound of the variable</span>
<span class="sd">        ub : float</span>
<span class="sd">            Upper bound of the variable</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; x = so.Variable(name=&#39;x&#39;, lb=0, ub=20)</span>
<span class="sd">        &gt;&gt;&gt; print(repr(x))</span>
<span class="sd">        sasoptpy.Variable(name=&#39;x&#39;, lb=0, ub=20, vartype=&#39;CONT&#39;)</span>
<span class="sd">        &gt;&gt;&gt; x.set_bounds(lb=5, ub=15)</span>
<span class="sd">        &gt;&gt;&gt; print(repr(x))</span>
<span class="sd">        sasoptpy.Variable(name=&#39;x&#39;, lb=5, ub=15, vartype=&#39;CONT&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">lb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lb</span> <span class="o">=</span> <span class="n">lb</span>
        <span class="k">if</span> <span class="n">ub</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ub</span> <span class="o">=</span> <span class="n">ub</span></div>

<div class="viewcode-block" id="Variable.set_init"><a class="viewcode-back" href="../../api/generated/sasoptpy.Variable.set_init.html#sasoptpy.Variable.set_init">[docs]</a>    <span class="k">def</span> <span class="nf">set_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes initial value of a variable</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        init : float or None</span>
<span class="sd">            Initial value of the variable</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; x = so.Variable(name=&#39;x&#39;)</span>
<span class="sd">        &gt;&gt;&gt; x.set_init(5)</span>

<span class="sd">        &gt;&gt;&gt; y = so.Variable(name=&#39;y&#39;, init=3)</span>
<span class="sd">        &gt;&gt;&gt; y.set_init()</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init</span> <span class="o">=</span> <span class="n">init</span></div>

<div class="viewcode-block" id="Variable.get_value"><a class="viewcode-back" href="../../api/generated/sasoptpy.Variable.get_value.html#sasoptpy.Variable.get_value">[docs]</a>    <span class="k">def</span> <span class="nf">get_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns value of a variable</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span></div>

    <span class="k">def</span> <span class="nf">set_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the value of a variable</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a string representation of the object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">st</span> <span class="o">=</span> <span class="s1">&#39;sasoptpy.Variable(name=</span><span class="se">\&#39;</span><span class="si">{}</span><span class="se">\&#39;</span><span class="s1">, &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">st</span> <span class="o">+=</span> <span class="s1">&#39;lb=</span><span class="si">{}</span><span class="s1">, &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lb</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ub</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">inf</span><span class="p">:</span>
            <span class="n">st</span> <span class="o">+=</span> <span class="s1">&#39;ub=</span><span class="si">{}</span><span class="s1">, &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ub</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">st</span> <span class="o">+=</span> <span class="s1">&#39;init=</span><span class="si">{}</span><span class="s1">, &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_init</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span><span class="p">:</span>
            <span class="n">st</span> <span class="o">+=</span> <span class="s1">&#39;abstract=True, &#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shadow</span><span class="p">:</span>
            <span class="n">st</span> <span class="o">+=</span> <span class="s1">&#39;shadow=True, &#39;</span>
        <span class="n">st</span> <span class="o">+=</span> <span class="s1">&#39; vartype=</span><span class="se">\&#39;</span><span class="si">{}</span><span class="se">\&#39;</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">st</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a representation string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">keylist</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">_expr</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">Expression</span><span class="p">)</span>
                       <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">]</span>
            <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">keylist</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">[</span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shadow</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iterkey</span><span class="p">:</span>
            <span class="n">keylist</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">_expr</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">Expression</span><span class="p">)</span>
                       <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iterkey</span><span class="p">]</span>
            <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">keylist</span><span class="p">)</span>
            <span class="k">return</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">[</span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>
        <span class="k">return</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">keylist</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">_to_iterator_expression</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">)</span>
            <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">keylist</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">[</span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shadow</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iterkey</span><span class="p">:</span>
            <span class="n">keylist</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">_to_iterator_expression</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_iterkey</span><span class="p">)</span>
            <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">keylist</span><span class="p">)</span>
            <span class="k">return</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">[</span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>
        <span class="k">return</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_defn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;var </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
        <span class="n">BIN</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">BIN</span>
        <span class="n">CONT</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">CONT</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">!=</span> <span class="n">CONT</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="n">BIN</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; binary&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; integer&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lb</span> <span class="o">!=</span> <span class="o">-</span><span class="n">inf</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lb</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="n">BIN</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; &gt;= </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lb</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ub</span> <span class="o">!=</span> <span class="n">inf</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ub</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="n">BIN</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; &lt;= </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ub</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; init </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_init</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;;&#39;</span>
        <span class="k">return</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>

    <span class="c1"># def _tag_constraint(self, c):</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     Adds a constraint into list of constraints that the variable appears</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     if c is not None:</span>
    <span class="c1">#         self._cons.add(c._name)</span>


<div class="viewcode-block" id="Constraint"><a class="viewcode-back" href="../../api/generated/sasoptpy.Constraint.html#sasoptpy.Constraint">[docs]</a><span class="k">class</span> <span class="nc">Constraint</span><span class="p">(</span><span class="n">Expression</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a linear or quadratic constraint for optimization models</span>

<span class="sd">    Constraints should be created by adding logical relations to</span>
<span class="sd">    :class:`Expression` objects.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    exp : Expression</span>
<span class="sd">        A logical expression that forms the constraint</span>
<span class="sd">    direction : string</span>
<span class="sd">        Direction of the logical expression, &#39;E&#39; (=), &#39;L&#39; (&lt;=) or &#39;G&#39; (&gt;=)</span>
<span class="sd">    name : string, optional</span>
<span class="sd">        Name of the constraint object</span>
<span class="sd">    crange : float, optional</span>
<span class="sd">        Range for ranged constraints</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; x = so.Variable(name=&#39;x&#39;)</span>
<span class="sd">    &gt;&gt;&gt; y = so.Variable(name=&#39;y&#39;)</span>
<span class="sd">    &gt;&gt;&gt; c1 = so.Constraint( 3 * x - 5 * y &lt;= 10, name=&#39;c1&#39;)</span>
<span class="sd">    &gt;&gt;&gt; print(repr(c1))</span>
<span class="sd">    sasoptpy.Constraint( -  5.0 * y  +  3.0 * x  &lt;=  10, name=&#39;c1&#39;)</span>

<span class="sd">    &gt;&gt;&gt; c2 = so.Constraint( - x + 2 * y - 5, direction=&#39;L&#39;, name=&#39;c2&#39;)</span>
<span class="sd">    sasoptpy.Constraint( -  x  +  2.0 * y  &lt;=  5, name=&#39;c2&#39;)</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>

<span class="sd">    * A constraint can be generated in multiple ways:</span>

<span class="sd">      1. Using the :func:`sasoptpy.Model.add_constraint` method</span>

<span class="sd">         &gt;&gt;&gt; m = so.Model(name=&#39;m&#39;)</span>
<span class="sd">         &gt;&gt;&gt; c1 = m.add_constraint(3 * x - 5 * y &lt;= 10, name=&#39;c1&#39;)</span>
<span class="sd">         &gt;&gt;&gt; print(repr(c1))</span>
<span class="sd">         sasoptpy.Constraint( -  5.0 * y  +  3.0 * x  &lt;=  10, name=&#39;c1&#39;)</span>

<span class="sd">      2. Using the constructor</span>

<span class="sd">         &gt;&gt;&gt; c1 = sasoptpy.Constraint(3 * x - 5 * y &lt;= 10, name=&#39;c1&#39;)</span>
<span class="sd">         &gt;&gt;&gt; print(repr(c1))</span>
<span class="sd">         sasoptpy.Constraint( -  5.0 * y  +  3.0 * x  &lt;=  10, name=&#39;c1&#39;)</span>

<span class="sd">    * The same constraint can be included into other models using the</span>
<span class="sd">      :func:`Model.include` method.</span>

<span class="sd">    See also</span>
<span class="sd">    --------</span>
<span class="sd">    :func:`sasoptpy.Model.add_constraint`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exp</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crange</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">check_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;con&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_objorder</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">exp</span><span class="o">.</span><span class="n">_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">_linCoef</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">exp</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">exp</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">m</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">_direction</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">=</span> <span class="n">direction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_range</span> <span class="o">=</span> <span class="n">crange</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_block</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_temp</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Called!&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">update_var_coef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the coefficient of a variable inside the constraint</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        var : Variable</span>
<span class="sd">            Variable to be updated</span>
<span class="sd">        value : float</span>
<span class="sd">            Coefficient of the variable in the constraint</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; c1 = so.Constraint(exp=3 * x - 5 * y &lt;= 10, name=&#39;c1&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(repr(c1))</span>
<span class="sd">        sasoptpy.Constraint( -  5.0 * y  +  3.0 * x  &lt;=  10, name=&#39;c1&#39;)</span>
<span class="sd">        &gt;&gt;&gt; c1.update_var_coef(x, -1)</span>
<span class="sd">        &gt;&gt;&gt; print(repr(c1))</span>
<span class="sd">        sasoptpy.Constraint( -  5.0 * y  -  x  &lt;=  10, name=&#39;c1&#39;)</span>

<span class="sd">        See also</span>
<span class="sd">        --------</span>
<span class="sd">        :func:`sasoptpy.Model.set_coef`</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">varname</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">_name</span>
        <span class="k">if</span> <span class="n">varname</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">varname</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">varname</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="n">var</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>

<div class="viewcode-block" id="Constraint.set_rhs"><a class="viewcode-back" href="../../api/generated/sasoptpy.Constraint.set_rhs.html#sasoptpy.Constraint.set_rhs">[docs]</a>    <span class="k">def</span> <span class="nf">set_rhs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes the RHS of a constraint</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        value : float</span>
<span class="sd">            New RHS value for the constraint</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; x = m.add_variable(name=&#39;x&#39;)</span>
<span class="sd">        &gt;&gt;&gt; y = m.add_variable(name=&#39;y&#39;)</span>
<span class="sd">        &gt;&gt;&gt; c = m.add_constraint(x + 3*y &lt;= 10, name=&#39;con_1&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(c)</span>
<span class="sd">        x  +  3.0 * y  &lt;=  10</span>
<span class="sd">        &gt;&gt;&gt; c.set_rhs(5)</span>
<span class="sd">        &gt;&gt;&gt; print(c)</span>
<span class="sd">        x  +  3.0 * y  &lt;=  5</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">value</span></div>

<div class="viewcode-block" id="Constraint.set_direction"><a class="viewcode-back" href="../../api/generated/sasoptpy.Constraint.set_direction.html#sasoptpy.Constraint.set_direction">[docs]</a>    <span class="k">def</span> <span class="nf">set_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes the direction of a constraint</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        direction : string</span>
<span class="sd">            Direction of the constraint, &#39;E&#39;, &#39;L&#39;, or &#39;G&#39; for equal to,</span>
<span class="sd">            less than or equal to, and greater than or equal to, respectively</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; c1 = so.Constraint(exp=3 * x - 5 * y &lt;= 10, name=&#39;c1&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(repr(c1))</span>
<span class="sd">        sasoptpy.Constraint( 3.0 * x  -  5.0 * y  &lt;=  10, name=&#39;c1&#39;)</span>
<span class="sd">        &gt;&gt;&gt; c1.set_direction(&#39;G&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(repr(c1))</span>
<span class="sd">        sasoptpy.Constraint( 3.0 * x  -  5.0 * y  &gt;=  10, name=&#39;c1&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;G&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">=</span> <span class="n">direction</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;WARNING: Cannot change constraint direction </span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">direction</span><span class="p">))</span></div>

<div class="viewcode-block" id="Constraint.set_block"><a class="viewcode-back" href="../../api/generated/sasoptpy.Constraint.set_block.html#sasoptpy.Constraint.set_block">[docs]</a>    <span class="k">def</span> <span class="nf">set_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_number</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the decomposition block number for a constraint</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        block_number : int</span>
<span class="sd">            Block number of the constraint</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; c1 = m.add_constraints((x + 2 * y[i] &lt;= 5 for i in NODES),</span>
<span class="sd">                                   name=&#39;c1&#39;)</span>
<span class="sd">        &gt;&gt;&gt; for i in NODES:</span>
<span class="sd">              c1[i].set_block(i)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_block</span> <span class="o">=</span> <span class="n">block_number</span></div>

<div class="viewcode-block" id="Constraint.get_value"><a class="viewcode-back" href="../../api/generated/sasoptpy.Constraint.get_value.html#sasoptpy.Constraint.get_value">[docs]</a>    <span class="k">def</span> <span class="nf">get_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current value of the constraint</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rhs : boolean, optional</span>
<span class="sd">            Whether constant values (RHS) will be included in the value or not.</span>
<span class="sd">            Default is false</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; x = so.Variable(name=&#39;x&#39;, init=2)</span>
<span class="sd">        &gt;&gt;&gt; c = so.Constraint(x ** 2 + 2 * x &lt;= 15, name=&#39;c&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(c.get_value())</span>
<span class="sd">        8</span>
<span class="sd">        &gt;&gt;&gt; print(c.get_value(rhs=True))</span>
<span class="sd">        -7</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">rhs</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">v</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">v</span></div>

    <span class="k">def</span> <span class="nf">_set_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span> <span class="o">=</span> <span class="n">key</span>

    <span class="k">def</span> <span class="nf">_defn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;con </span><span class="si">{}</span><span class="s1"> : &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_range</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> &lt;= &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">])</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_expr</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">==</span> <span class="s1">&#39;E&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_range</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; = &#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">==</span> <span class="s1">&#39;L&#39;</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; &lt;= &#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">==</span> <span class="s1">&#39;G&#39;</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; &gt;= &#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">==</span> <span class="s1">&#39;E&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_range</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; &lt;= &#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Constraint has no direction!&#39;</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_range</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;;&#39;</span>
            <span class="c1"># Currently we switch to frame when blocks are set</span>
            <span class="c1"># if self._block:</span>
            <span class="c1">#     s += &#39;\n&#39;</span>
            <span class="c1">#     s += self._name + &#39;.block = &#39; + str(self._block) + &#39;;&#39;</span>
        <span class="k">return</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a representation string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">==</span> <span class="s1">&#39;E&#39;</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; == &#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">==</span> <span class="s1">&#39;L&#39;</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; &lt;= &#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">==</span> <span class="s1">&#39;G&#39;</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; &gt;= &#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Constraint has no direction!&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_range</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; [</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">],</span>
                                    <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">+</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">_range</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a string representation of the object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">st</span> <span class="o">=</span> <span class="s1">&#39;sasoptpy.Constraint(</span><span class="si">{}</span><span class="s1">, name=</span><span class="se">\&#39;</span><span class="si">{}</span><span class="se">\&#39;</span><span class="s1">)&#39;</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">st</span> <span class="o">=</span> <span class="s1">&#39;sasoptpy.Constraint(</span><span class="si">{}</span><span class="s1">, name=None)&#39;</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">s</span></div>


<div class="viewcode-block" id="VariableGroup"><a class="viewcode-back" href="../../api/generated/sasoptpy.VariableGroup.html#sasoptpy.VariableGroup">[docs]</a><span class="k">class</span> <span class="nc">VariableGroup</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a group of :class:`Variable` objects</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    argv : list, dict, int, :class:`pandas.Index`</span>
<span class="sd">        Loop index for variable group</span>
<span class="sd">    name : string, optional</span>
<span class="sd">        Name (prefix) of the variables</span>
<span class="sd">    vartype : string, optional</span>
<span class="sd">        Type of variables, `BIN`, `INT`, or `CONT`</span>
<span class="sd">    lb : list, dict, :class:`pandas.Series`, optional</span>
<span class="sd">        Lower bounds of variables</span>
<span class="sd">    ub : list, dict, :class:`pandas.Series`, optional</span>
<span class="sd">        Upper bounds of variables</span>
<span class="sd">    init : float, optional</span>
<span class="sd">        Initial values of variables</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; PERIODS = [&#39;Period1&#39;, &#39;Period2&#39;, &#39;Period3&#39;]</span>
<span class="sd">    &gt;&gt;&gt; production = so.VariableGroup(PERIODS, vartype=so.INT,</span>
<span class="sd">                                      name=&#39;production&#39;, lb=10)</span>
<span class="sd">    &gt;&gt;&gt; print(production)</span>
<span class="sd">    Variable Group (production) [</span>
<span class="sd">      [Period1: production[&#39;Period1&#39;]]</span>
<span class="sd">      [Period2: production[&#39;Period2&#39;]]</span>
<span class="sd">      [Period3: production[&#39;Period3&#39;]]</span>
<span class="sd">    ]</span>

<span class="sd">    &gt;&gt;&gt; x = so.VariableGroup(4, vartype=so.BIN, name=&#39;x&#39;)</span>
<span class="sd">    &gt;&gt;&gt; print(x)</span>
<span class="sd">    Variable Group (x) [</span>
<span class="sd">      [0: x[0]]</span>
<span class="sd">      [1: x[1]]</span>
<span class="sd">      [2: x[2]]</span>
<span class="sd">      [3: x[3]]</span>
<span class="sd">    ]</span>

<span class="sd">    &gt;&gt;&gt; z = so.VariableGroup(2, [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], name=&#39;z&#39;)</span>
<span class="sd">    &gt;&gt;&gt; print(z)</span>
<span class="sd">    Variable Group (z) [</span>
<span class="sd">      [(0, &#39;a&#39;): z[0, &#39;a&#39;]]</span>
<span class="sd">      [(0, &#39;b&#39;): z[0, &#39;b&#39;]]</span>
<span class="sd">      [(0, &#39;c&#39;): z[0, &#39;c&#39;]]</span>
<span class="sd">      [(1, &#39;a&#39;): z[1, &#39;a&#39;]]</span>
<span class="sd">      [(1, &#39;b&#39;): z[1, &#39;b&#39;]]</span>
<span class="sd">      [(1, &#39;c&#39;): z[1, &#39;c&#39;]]</span>
<span class="sd">    ]</span>
<span class="sd">    &gt;&gt;&gt; print(repr(z))</span>
<span class="sd">    sasoptpy.VariableGroup([0, 1], [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], name=&#39;z&#39;)</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    * When working with a single model, use the</span>
<span class="sd">      :func:`sasoptpy.Model.add_variables` method.</span>
<span class="sd">    * If a variable group object is created, it can be added to a model using</span>
<span class="sd">      the :func:`sasoptpy.Model.include` method.</span>
<span class="sd">    * An individual variable inside the group can be accessed using indices.</span>

<span class="sd">      &gt;&gt;&gt; z = so.VariableGroup(2, [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], name=&#39;z&#39;, lb=0, ub=10)</span>
<span class="sd">      &gt;&gt;&gt; print(repr(z[0, &#39;a&#39;]))</span>
<span class="sd">      sasoptpy.Variable(name=&#39;z_0_a&#39;, lb=0, ub=10, vartype=&#39;CONT&#39;)</span>

<span class="sd">    See also</span>
<span class="sd">    --------</span>
<span class="sd">    :func:`sasoptpy.Model.add_variables`</span>
<span class="sd">    :func:`sasoptpy.Model.include`</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">argv</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">vartype</span><span class="o">=</span><span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">CONT</span><span class="p">,</span> <span class="n">lb</span><span class="o">=-</span><span class="n">inf</span><span class="p">,</span>
                 <span class="n">ub</span><span class="o">=</span><span class="n">inf</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">abstract</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_varlist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_groups</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keyset</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">vartype</span> <span class="o">==</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">BIN</span> <span class="ow">and</span> <span class="n">ub</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ub</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">vartype</span> <span class="o">==</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">BIN</span> <span class="ow">and</span> <span class="n">lb</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lb</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">vartype</span> <span class="o">==</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">INT</span> <span class="ow">and</span> <span class="n">lb</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lb</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_recursive_add_vars</span><span class="p">(</span><span class="o">*</span><span class="n">argv</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                                 <span class="n">vartype</span><span class="o">=</span><span class="n">vartype</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="n">init</span><span class="p">,</span>
                                 <span class="n">vardict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">,</span> <span class="n">varlist</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_varlist</span><span class="p">,</span>
                                 <span class="n">abstract</span><span class="o">=</span><span class="n">abstract</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lb</span> <span class="o">=</span> <span class="n">lb</span> <span class="k">if</span> <span class="n">lb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="o">-</span><span class="n">inf</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ub</span> <span class="o">=</span> <span class="n">ub</span> <span class="k">if</span> <span class="n">ub</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">inf</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init</span> <span class="o">=</span> <span class="n">init</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="n">vartype</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">check_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;var&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_objorder</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span> <span class="o">=</span> <span class="n">abstract</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">argv</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_keyset</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">extract_argument_as_list</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_keyset</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">extract_argument_as_list</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">Set</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">v</span><span class="o">.</span><span class="n">_abstract</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_shadows</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_info</span><span class="p">()</span>

<div class="viewcode-block" id="VariableGroup.get_name"><a class="viewcode-back" href="../../api/generated/sasoptpy.VariableGroup.get_name.html#sasoptpy.VariableGroup.get_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the name of the variable group</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        name : string</span>
<span class="sd">            Name of the variable group</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; m = so.Model(name=&#39;m&#39;)</span>
<span class="sd">        &gt;&gt;&gt; var1 = m.add_variables(4, name=&#39;x&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(var1.get_name())</span>
<span class="sd">        x</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span></div>

    <span class="k">def</span> <span class="nf">add_member</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">var</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vartype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                   <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shadow</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        (Experimental) Adds a new member to Variable Group</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>

<span class="sd">        - This method is mainly intended for internal use.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">key</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">tuple_pack</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">dict_to_add</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">shadow</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shadows</span>

        <span class="k">if</span> <span class="n">var</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dict_to_add</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">var</span>
            <span class="k">return</span> <span class="n">var</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vartype</span> <span class="o">=</span> <span class="n">vartype</span> <span class="k">if</span> <span class="n">vartype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span>
            <span class="n">lb</span> <span class="o">=</span> <span class="n">lb</span> <span class="k">if</span> <span class="n">lb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lb</span>
            <span class="n">ub</span> <span class="o">=</span> <span class="n">ub</span> <span class="k">if</span> <span class="n">ub</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ub</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">varname</span> <span class="o">=</span> <span class="n">name</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">varname</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">[&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                        <span class="nb">format</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">key</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span>
            <span class="n">new_var</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">Variable</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">varname</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="n">init</span><span class="p">,</span> <span class="n">vartype</span><span class="o">=</span><span class="n">vartype</span><span class="p">,</span>
                <span class="n">shadow</span><span class="o">=</span><span class="n">shadow</span><span class="p">,</span> <span class="n">abstract</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">dict_to_add</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_var</span>
            <span class="k">return</span> <span class="n">new_var</span>

    <span class="k">def</span> <span class="nf">_recursive_add_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">argv</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">vartype</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">init</span><span class="p">,</span>
                            <span class="n">vardict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">varlist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vkeys</span><span class="o">=</span><span class="p">(),</span> <span class="n">abstract</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">vardict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">vardict</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">varlist</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">varlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">the_list</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">extract_argument_as_list</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">the_list</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="n">newfixed</span> <span class="o">=</span> <span class="n">vkeys</span> <span class="o">+</span> <span class="n">i</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">newfixed</span> <span class="o">=</span> <span class="n">vkeys</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="p">,)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">varname</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">[&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="nb">format</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">newfixed</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span>
                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">newfixed</span><span class="p">):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="n">k</span><span class="p">]))</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="n">k</span><span class="p">])</span>  <span class="c1"># pd.Index behaves as an ordered set</span>
                <span class="n">varlb</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">extract_list_value</span><span class="p">(</span><span class="n">newfixed</span><span class="p">,</span> <span class="n">lb</span><span class="p">)</span>
                <span class="n">varub</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">extract_list_value</span><span class="p">(</span><span class="n">newfixed</span><span class="p">,</span> <span class="n">ub</span><span class="p">)</span>
                <span class="n">varin</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">extract_list_value</span><span class="p">(</span><span class="n">newfixed</span><span class="p">,</span> <span class="n">init</span><span class="p">)</span>
                <span class="n">new_var</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">Variable</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">varname</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="n">varlb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">varub</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="n">varin</span><span class="p">,</span>
                    <span class="n">vartype</span><span class="o">=</span><span class="n">vartype</span><span class="p">,</span> <span class="n">abstract</span><span class="o">=</span><span class="n">abstract</span><span class="p">)</span>
                <span class="n">vardict</span><span class="p">[</span><span class="n">newfixed</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_var</span>
                <span class="n">varlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newfixed</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_recursive_add_vars</span><span class="p">(</span><span class="o">*</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">vardict</span><span class="o">=</span><span class="n">vardict</span><span class="p">,</span>
                                         <span class="n">vkeys</span><span class="o">=</span><span class="n">newfixed</span><span class="p">,</span>
                                         <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">vartype</span><span class="o">=</span><span class="n">vartype</span><span class="p">,</span>
                                         <span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="n">init</span><span class="p">,</span>
                                         <span class="n">varlist</span><span class="o">=</span><span class="n">varlist</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_var_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_set_info</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overloaded method to access individual variables</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        key : tuple, string or int</span>
<span class="sd">            Key of the variable</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ref : Variable or list</span>
<span class="sd">            Reference to a single Variable or a list of Variable objects</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">SetIterator</span><span class="p">):</span>
            <span class="c1"># TODO check if number of keys correct e.g. x[I], x[1,2] requested</span>
            <span class="n">tuple_key</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">tuple_pack</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="n">tuple_key</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">flatten_tuple</span><span class="p">(</span><span class="n">tuple_key</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">tuple_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">tuple_key</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">tuple_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shadows</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shadows</span><span class="p">[</span><span class="n">tuple_key</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">k</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                <span class="n">vname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
                <span class="n">vname</span> <span class="o">=</span> <span class="n">vname</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="n">shadow</span> <span class="o">=</span> <span class="n">Variable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">vname</span><span class="p">,</span> <span class="n">vartype</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">_type</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">_lb</span><span class="p">,</span>
                                  <span class="n">ub</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">_ub</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">_init</span><span class="p">,</span> <span class="n">abstract</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                  <span class="n">shadow</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">ub</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">ParameterValue</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">tuple_key</span><span class="p">,</span>
                                                  <span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;.ub&#39;</span><span class="p">)</span>
                <span class="n">lb</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">ParameterValue</span><span class="p">(</span><span class="n">shadow</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">tuple_key</span><span class="p">,</span>
                                                  <span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;.lb&#39;</span><span class="p">)</span>
                <span class="n">shadow</span><span class="o">.</span><span class="n">_ub</span> <span class="o">=</span> <span class="n">ub</span>
                <span class="n">shadow</span><span class="o">.</span><span class="n">_lb</span> <span class="o">=</span> <span class="n">lb</span>
                <span class="n">shadow</span><span class="o">.</span><span class="n">_iterkey</span> <span class="o">=</span> <span class="n">tuple_key</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_shadows</span><span class="p">[</span><span class="n">tuple_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">shadow</span>
                <span class="k">return</span> <span class="n">shadow</span>

        <span class="n">k</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">tuple_pack</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">indices_to_filter</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">filter_values</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">list_of_variables</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;*&#39;</span><span class="p">:</span>
                    <span class="n">indices_to_filter</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                    <span class="n">filter_values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">_list_item</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">:</span>
                <span class="n">eligible</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">indices_to_filter</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="n">f</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">filter_values</span><span class="p">[</span><span class="n">f</span><span class="p">]:</span>
                        <span class="n">eligible</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">eligible</span><span class="p">:</span>
                    <span class="n">list_of_variables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">v</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">list_of_variables</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;Requested variable group is empty:&#39;</span> <span class="o">+</span>
                              <span class="s1">&#39; </span><span class="si">{}</span><span class="s1">[</span><span class="si">{}</span><span class="s1">] (</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span>
                              <span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">key</span><span class="p">)),</span>
                              <span class="ne">RuntimeWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">list_of_variables</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Yields an iterable list of variables inside the variable group</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        i : list</span>
<span class="sd">            Iterable list of Variable objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_varlist</span><span class="p">:</span>
            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_defn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tabs</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns string to be used in OPTMODEL definition</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        tabs : string, optional</span>
<span class="sd">            Tab string that is used in :meth:`Model.to_optmodel` method</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">tabs</span> <span class="o">+</span> <span class="s1">&#39;var </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; {&#39;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keyset</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">Set</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">, &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">range</span><span class="p">):</span>
                <span class="n">ind_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">i</span><span class="p">:</span>
                    <span class="n">ind_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">_to_quoted_string</span><span class="p">(</span><span class="n">j</span><span class="p">))</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;{{</span><span class="si">{}</span><span class="s1">}}, &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ind_list</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;{{</span><span class="si">{}</span><span class="s1">}}, &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">_to_quoted_string</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">, &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR: VariableGroup </span><span class="si">{}</span><span class="s1"> has invalid index </span><span class="si">{}</span><span class="s1"> (</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span>
                          <span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;} &#39;</span>
        <span class="c1"># Grab features</span>
        <span class="n">CONT</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">CONT</span>
        <span class="n">BIN</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">BIN</span>
        <span class="n">INT</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">INT</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">!=</span> <span class="n">CONT</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="n">BIN</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;binary &#39;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="n">INT</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;integer &#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>\
           <span class="n">np</span><span class="o">.</span><span class="n">issubdtype</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lb</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">number</span><span class="p">)</span> <span class="ow">and</span>\
           <span class="bp">self</span><span class="o">.</span><span class="n">_lb</span> <span class="o">!=</span> <span class="o">-</span><span class="n">inf</span> <span class="ow">and</span>\
           <span class="ow">not</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lb</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="n">BIN</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&gt;= </span><span class="si">{}</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lb</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ub</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>\
           <span class="n">np</span><span class="o">.</span><span class="n">issubdtype</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ub</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">number</span><span class="p">)</span> <span class="ow">and</span>\
           <span class="bp">self</span><span class="o">.</span><span class="n">_ub</span> <span class="o">!=</span> <span class="n">inf</span> <span class="ow">and</span>\
           <span class="ow">not</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ub</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="n">BIN</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;= </span><span class="si">{}</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ub</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;init </span><span class="si">{}</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_init</span><span class="p">)</span>

        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;;&#39;</span>
        <span class="c1"># Check bounds to see if they are parameters</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shadows</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shadows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">lbparam</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.lb&#39;</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">_lb</span><span class="p">)</span>
                <span class="n">ubparam</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.ub&#39;</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">_ub</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">lbparam</span> <span class="ow">or</span> <span class="n">ubparam</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">tabs</span>
                    <span class="n">loop_text</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">_to_optmodel_loop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">loop_text</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;for&#39;</span> <span class="o">+</span> <span class="n">loop_text</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span>
                    <span class="k">if</span> <span class="n">lbparam</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">_lb</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
                            <span class="n">s</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.lb=&#39;</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">_lb</span><span class="o">.</span><span class="n">_defn</span><span class="p">()</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">s</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.lb=&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">_lb</span><span class="p">)</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span>
                    <span class="k">if</span> <span class="n">ubparam</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">_ub</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
                            <span class="n">s</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.ub=&#39;</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">_ub</span><span class="o">.</span><span class="n">_defn</span><span class="p">()</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">s</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.ub=&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">_ub</span><span class="p">)</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;;&#39;</span>
                <span class="n">initparam</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">_init</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">_init</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init</span>
                <span class="k">if</span> <span class="n">initparam</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_shadows</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                    <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_shadows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_init</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_init</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">_init</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">_init</span><span class="p">))</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">tabs</span>
                    <span class="n">loop_text</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">_to_optmodel_loop</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">loop_text</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;for &#39;</span> <span class="o">+</span> <span class="n">loop_text</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; = &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">_init</span><span class="p">)</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="c1"># Check if LB needs to be printed</span>
                <span class="n">printlb</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">defaultlb</span> <span class="o">=</span> <span class="o">-</span><span class="n">inf</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="ow">is</span> <span class="n">CONT</span> <span class="k">else</span> <span class="mi">0</span>
                <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">_lb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lb</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">issubdtype</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lb</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">number</span><span class="p">):</span>
                        <span class="n">printlb</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">elif</span> <span class="n">v</span><span class="o">.</span><span class="n">_lb</span> <span class="o">==</span> <span class="n">defaultlb</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lb</span> <span class="o">!=</span> <span class="n">defaultlb</span><span class="p">):</span>
                        <span class="n">printlb</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">elif</span> <span class="n">v</span><span class="o">.</span><span class="n">_lb</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lb</span><span class="p">:</span>
                        <span class="n">printlb</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">printlb</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">tabs</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.lb = </span><span class="si">{}</span><span class="s1">;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">_expr</span><span class="p">(),</span> <span class="n">v</span><span class="o">.</span><span class="n">_lb</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">_lb</span> <span class="o">!=</span> <span class="o">-</span><span class="n">inf</span> <span class="k">else</span> <span class="s2">&quot;-constant(&#39;BIG&#39;)&quot;</span><span class="p">)</span>

                <span class="c1"># Check if UB needs to be printed</span>
                <span class="n">printub</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">defaultub</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="ow">is</span> <span class="n">BIN</span> <span class="k">else</span> <span class="n">inf</span>
                <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">_ub</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ub</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">issubdtype</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ub</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">number</span><span class="p">):</span>
                        <span class="n">printub</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">elif</span> <span class="n">v</span><span class="o">.</span><span class="n">_ub</span> <span class="o">==</span> <span class="n">defaultub</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ub</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ub</span> <span class="o">!=</span> <span class="n">defaultub</span><span class="p">):</span>
                        <span class="n">printub</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">elif</span> <span class="n">v</span><span class="o">.</span><span class="n">_ub</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ub</span><span class="p">:</span>
                        <span class="n">printub</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">printub</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">tabs</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.ub = </span><span class="si">{}</span><span class="s1">;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">_expr</span><span class="p">(),</span> <span class="n">v</span><span class="o">.</span><span class="n">_ub</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">_ub</span> <span class="o">!=</span> <span class="n">inf</span> <span class="k">else</span> <span class="s2">&quot;constant(&#39;BIG&#39;)&quot;</span><span class="p">)</span>

                <span class="c1"># Check if init needs to be printed</span>
                <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">_init</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">_init</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">tabs</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> = </span><span class="si">{}</span><span class="s1">;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">_expr</span><span class="p">(),</span> <span class="n">v</span><span class="o">.</span><span class="n">_init</span><span class="p">)</span>

        <span class="k">return</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

<div class="viewcode-block" id="VariableGroup.sum"><a class="viewcode-back" href="../../api/generated/sasoptpy.VariableGroup.sum.html#sasoptpy.VariableGroup.sum">[docs]</a>    <span class="k">def</span> <span class="nf">sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">argv</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Quick sum method for the variable groups</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        argv : Arguments</span>
<span class="sd">            List of indices for the sum</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        r : Expression</span>
<span class="sd">            Expression that represents the sum of all variables in the group</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; z = so.VariableGroup(2, [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], name=&#39;z&#39;, lb=0, ub=10)</span>
<span class="sd">        &gt;&gt;&gt; e1 = z.sum(&#39;*&#39;, &#39;*&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(e1)</span>
<span class="sd">        z[1, &#39;c&#39;]  +  z[1, &#39;a&#39;]  +  z[1, &#39;b&#39;]  +  z[0, &#39;a&#39;]  +  z[0, &#39;b&#39;]  +</span>
<span class="sd">        z[0, &#39;c&#39;]</span>
<span class="sd">        &gt;&gt;&gt; e2 = z.sum(&#39;*&#39;, &#39;a&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(e2)</span>
<span class="sd">         z[1, &#39;a&#39;]  +  z[0, &#39;a&#39;]</span>
<span class="sd">        &gt;&gt;&gt; e3 = z.sum(&#39;*&#39;, [&#39;a&#39;, &#39;b&#39;])</span>
<span class="sd">        &gt;&gt;&gt; print(e3)</span>
<span class="sd">         z[1, &#39;a&#39;]  +  z[0, &#39;b&#39;]  +  z[1, &#39;b&#39;]  +  z[0, &#39;a&#39;]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_abstract</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">()</span>
            <span class="n">ind_set</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
            <span class="n">iter_key</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">a</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span><span class="p">:</span>
                    <span class="n">si</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">SetIterator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_keyset</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                    <span class="n">ind_set</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">si</span><span class="p">)</span>
                    <span class="n">iter_key</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">si</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ind_set</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">ind_set</span><span class="p">)])</span>
            <span class="n">r</span><span class="o">.</span><span class="n">_operator</span> <span class="o">=</span> <span class="s1">&#39;sum&#39;</span>
            <span class="n">r</span><span class="o">.</span><span class="n">_iterkey</span> <span class="o">=</span> <span class="n">iter_key</span>
            <span class="k">return</span> <span class="n">r</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">temp</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">feas_set</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span><span class="p">:</span>
                    <span class="n">feas_set</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_groups</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;__iter__&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">feas_set</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">feas_set</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">a</span><span class="p">])</span>
            <span class="n">combs</span> <span class="o">=</span> <span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="n">feas_set</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">combs</span><span class="p">:</span>
                <span class="n">var_key</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">tuple_pack</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">var_key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">:</span>
                    <span class="n">r</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">var_key</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">r</span><span class="o">.</span><span class="n">set_permanent</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">r</span></div>

<div class="viewcode-block" id="VariableGroup.mult"><a class="viewcode-back" href="../../api/generated/sasoptpy.VariableGroup.mult.html#sasoptpy.VariableGroup.mult">[docs]</a>    <span class="k">def</span> <span class="nf">mult</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Quick multiplication method for the variable groups</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        vector : list, dictionary, :class:`pandas.Series`,\</span>
<span class="sd">                 or :class:`pandas.DataFrame`</span>
<span class="sd">            Vector to be multiplied with the variable group</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        r : Expression</span>
<span class="sd">            An expression that is the product of the variable group with the</span>
<span class="sd">            given vector</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        Multiplying with a list</span>

<span class="sd">        &gt;&gt;&gt; x = so.VariableGroup(4, vartype=so.BIN, name=&#39;x&#39;)</span>
<span class="sd">        &gt;&gt;&gt; e1 = x.mult([1, 5, 6, 10])</span>
<span class="sd">        &gt;&gt;&gt; print(e1)</span>
<span class="sd">         10.0 * x[3]  +  6.0 * x[2]  +  x[0]  +  5.0 * x[1]</span>

<span class="sd">        Multiplying with a dictionary</span>

<span class="sd">        &gt;&gt;&gt; y = so.VariableGroup([0, 1], [&#39;a&#39;, &#39;b&#39;], name=&#39;y&#39;, lb=0, ub=10)</span>
<span class="sd">        &gt;&gt;&gt; dvals = {(0, &#39;a&#39;): 1, (0, &#39;b&#39;): 2, (1, &#39;a&#39;): -1, (1, &#39;b&#39;): 5}</span>
<span class="sd">        &gt;&gt;&gt; e2 = y.mult(dvals)</span>
<span class="sd">        &gt;&gt;&gt; print(e2)</span>
<span class="sd">         2.0 * y[0, &#39;b&#39;]  -  y[1, &#39;a&#39;]  +  y[0, &#39;a&#39;]  +  5.0 * y[1, &#39;b&#39;]</span>

<span class="sd">        Multiplying with a pandas.Series object</span>

<span class="sd">        &gt;&gt;&gt; u = so.VariableGroup([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;], name=&#39;u&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ps = pd.Series([0.1, 1.5, -0.2, 0.3], index=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;])</span>
<span class="sd">        &gt;&gt;&gt; e3 = u.mult(ps)</span>
<span class="sd">        &gt;&gt;&gt; print(e3)</span>
<span class="sd">         1.5 * u[&#39;b&#39;]  +  0.1 * u[&#39;a&#39;]  -  0.2 * u[&#39;c&#39;]  +  0.3 * u[&#39;d&#39;]</span>

<span class="sd">        Multiplying with a pandas.DataFrame object</span>

<span class="sd">        &gt;&gt;&gt; data = np.random.rand(3, 3)</span>
<span class="sd">        &gt;&gt;&gt; df = pd.DataFrame(data, columns=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;])</span>
<span class="sd">        &gt;&gt;&gt; print(df)</span>
<span class="sd">        NOTE: Initialized model model1</span>
<span class="sd">                  a         b         c</span>
<span class="sd">        0  0.966524  0.237081  0.944630</span>
<span class="sd">        1  0.821356  0.074753  0.345596</span>
<span class="sd">        2  0.065229  0.037212  0.136644</span>
<span class="sd">        &gt;&gt;&gt; y = m.add_variables(3, [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], name=&#39;y&#39;)</span>
<span class="sd">        &gt;&gt;&gt; e = y.mult(df)</span>
<span class="sd">        &gt;&gt;&gt; print(e)</span>
<span class="sd">        0.9665237354418064 * y[0, &#39;a&#39;]  +  0.23708064143289442 * y[0, &#39;b&#39;]  +</span>
<span class="sd">        0.944629500537536 * y[0, &#39;c&#39;]  +  0.8213562592159828 * y[1, &#39;a&#39;]  +</span>
<span class="sd">        0.07475256894157478 * y[1, &#39;b&#39;]  +  0.3455957019116668 * y[1, &#39;c&#39;]  +</span>
<span class="sd">        0.06522945752546017 * y[2, &#39;a&#39;]  +  0.03721153533250843 * y[2, &#39;b&#39;]  +</span>
<span class="sd">        0.13664422498043194 * y[2, &#39;c&#39;]</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">vector</span><span class="p">):</span>
                <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">]</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="n">var</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">vector</span><span class="p">[</span><span class="n">i</span><span class="p">]}</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">vector</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                <span class="n">k</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">tuple_pack</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="n">var</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">vector</span><span class="p">[</span><span class="n">key</span><span class="p">]}</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
            <span class="n">vectorflat</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">flatten_frame</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">vectorflat</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                <span class="n">k</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">tuple_pack</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="n">var</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">vectorflat</span><span class="p">[</span><span class="n">key</span><span class="p">]}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">vector</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                    <span class="n">k</span> <span class="o">=</span> <span class="n">key</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">k</span> <span class="o">=</span> <span class="p">(</span><span class="n">key</span><span class="p">,)</span>
                <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="n">var</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">vector</span><span class="p">[</span><span class="n">i</span><span class="p">]}</span>
        <span class="k">return</span> <span class="n">r</span></div>

<div class="viewcode-block" id="VariableGroup.set_init"><a class="viewcode-back" href="../../api/generated/sasoptpy.VariableGroup.set_init.html#sasoptpy.VariableGroup.set_init">[docs]</a>    <span class="k">def</span> <span class="nf">set_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">init</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets / updates initial value for the given variable</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        init : float, list, dict, :class:`pandas.Series`</span>
<span class="sd">            Initial value of the variables</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; m = so.Model(name=&#39;m&#39;)</span>
<span class="sd">        &gt;&gt;&gt; y = m.add_variables(3, name=&#39;y&#39;)</span>
<span class="sd">        &gt;&gt;&gt; print(y._defn())</span>
<span class="sd">        var y {{0,1,2}};</span>
<span class="sd">        &gt;&gt;&gt; y.set_init(5)</span>
<span class="sd">        &gt;&gt;&gt; print(y._defn())</span>
<span class="sd">        var y {{0,1,2}} init 5;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init</span> <span class="o">=</span> <span class="n">init</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">:</span>
            <span class="n">inval</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">extract_list_value</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">init</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">set_init</span> <span class="o">=</span> <span class="n">inval</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shadows</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_shadows</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">set_init</span> <span class="o">=</span> <span class="n">init</span></div>

<div class="viewcode-block" id="VariableGroup.set_bounds"><a class="viewcode-back" href="../../api/generated/sasoptpy.VariableGroup.set_bounds.html#sasoptpy.VariableGroup.set_bounds">[docs]</a>    <span class="k">def</span> <span class="nf">set_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets / updates bounds for the given variable</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        lb : float, :class:`pandas.Series`, optional</span>
<span class="sd">            Lower bound</span>
<span class="sd">        ub : float, :class:`pandas.Series`, optional</span>
<span class="sd">            Upper bound</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; z = so.VariableGroup(2, [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], name=&#39;z&#39;, lb=0, ub=10)</span>
<span class="sd">        &gt;&gt;&gt; print(repr(z[0, &#39;a&#39;]))</span>
<span class="sd">        sasoptpy.Variable(name=&#39;z_0_a&#39;, lb=0, ub=10, vartype=&#39;CONT&#39;)</span>
<span class="sd">        &gt;&gt;&gt; z.set_bounds(lb=3, ub=5)</span>
<span class="sd">        &gt;&gt;&gt; print(repr(z[0, &#39;a&#39;]))</span>
<span class="sd">        sasoptpy.Variable(name=&#39;z_0_a&#39;, lb=3, ub=5, vartype=&#39;CONT&#39;)</span>

<span class="sd">        &gt;&gt;&gt; u = so.VariableGroup([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;], name=&#39;u&#39;)</span>
<span class="sd">        &gt;&gt;&gt; lb_vals = pd.Series([1, 4, 0, -1], index=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;])</span>
<span class="sd">        &gt;&gt;&gt; u.set_bounds(lb=lb_vals)</span>
<span class="sd">        &gt;&gt;&gt; print(repr(u[&#39;b&#39;]))</span>
<span class="sd">        sasoptpy.Variable(name=&#39;u_b&#39;, lb=4, ub=inf, vartype=&#39;CONT&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">lb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lb</span> <span class="o">=</span> <span class="n">lb</span>
        <span class="k">if</span> <span class="n">ub</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ub</span> <span class="o">=</span> <span class="n">ub</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">:</span>
            <span class="n">varlb</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">extract_list_value</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">lb</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">lb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">set_bounds</span><span class="p">(</span><span class="n">lb</span><span class="o">=</span><span class="n">varlb</span><span class="p">)</span>
            <span class="n">varub</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">extract_list_value</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">ub</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ub</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">.</span><span class="n">set_bounds</span><span class="p">(</span><span class="n">ub</span><span class="o">=</span><span class="n">varub</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a representation string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;Variable Group (</span><span class="si">{}</span><span class="s1">) [</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vd</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">vd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">vd</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  [</span><span class="si">{}</span><span class="s1">: </span><span class="si">{}</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">tuple_unpack</span><span class="p">(</span><span class="n">k</span><span class="p">),</span>
                                       <span class="n">v</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;]&#39;</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a string representation of the object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;sasoptpy.VariableGroup(&#39;</span>
        <span class="n">keylen</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">keylen</span><span class="p">):</span>
            <span class="n">ls</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">vd</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="n">vd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vardict</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">vd</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ls</span><span class="p">:</span>
                    <span class="n">ls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">, &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ls</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;name=</span><span class="se">\&#39;</span><span class="si">{}</span><span class="se">\&#39;</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span></div>


<div class="viewcode-block" id="ConstraintGroup"><a class="viewcode-back" href="../../api/generated/sasoptpy.ConstraintGroup.html#sasoptpy.ConstraintGroup">[docs]</a><span class="k">class</span> <span class="nc">ConstraintGroup</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a group of :class:`Constraint` objects</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    argv : Generator-type object</span>
<span class="sd">        A Python generator that includes :class:`Expression` objects</span>
<span class="sd">    name : string, optional</span>
<span class="sd">        Name (prefix) of the constraints</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; var_ind = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]</span>
<span class="sd">    &gt;&gt;&gt; u = so.VariableGroup(var_ind, name=&#39;u&#39;)</span>
<span class="sd">    &gt;&gt;&gt; t = so.Variable(name=&#39;t&#39;)</span>
<span class="sd">    &gt;&gt;&gt; cg = so.ConstraintGroup((u[i] + 2 * t &lt;= 5 for i in var_ind), name=&#39;cg&#39;)</span>
<span class="sd">    &gt;&gt;&gt; print(cg)</span>
<span class="sd">    Constraint Group (cg) [</span>
<span class="sd">      [a:  2.0 * t  +  u[&#39;a&#39;]  &lt;=  5]</span>
<span class="sd">      [b:  u[&#39;b&#39;]  +  2.0 * t  &lt;=  5]</span>
<span class="sd">      [c:  2.0 * t  +  u[&#39;c&#39;]  &lt;=  5]</span>
<span class="sd">      [d:  2.0 * t  +  u[&#39;d&#39;]  &lt;=  5]</span>
<span class="sd">    ]</span>

<span class="sd">    &gt;&gt;&gt; z = so.VariableGroup(2, [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], name=&#39;z&#39;, lb=0, ub=10)</span>
<span class="sd">    &gt;&gt;&gt; cg2 = so.ConstraintGroup((2 * z[i, j] + 3 * z[i-1, j] &gt;= 2 for i in</span>
<span class="sd">                                  [1] for j in [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]), name=&#39;cg2&#39;)</span>
<span class="sd">    &gt;&gt;&gt; print(cg2)</span>
<span class="sd">    Constraint Group (cg2) [</span>
<span class="sd">      [(1, &#39;a&#39;):  3.0 * z[0, &#39;a&#39;]  +  2.0 * z[1, &#39;a&#39;]  &gt;=  2]</span>
<span class="sd">      [(1, &#39;b&#39;):  2.0 * z[1, &#39;b&#39;]  +  3.0 * z[0, &#39;b&#39;]  &gt;=  2]</span>
<span class="sd">      [(1, &#39;c&#39;):  2.0 * z[1, &#39;c&#39;]  +  3.0 * z[0, &#39;c&#39;]  &gt;=  2]</span>
<span class="sd">    ]</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Use :func:`sasoptpy.Model.add_constraints` when working with a single</span>
<span class="sd">    model.</span>

<span class="sd">    See also</span>
<span class="sd">    --------</span>
<span class="sd">    :func:`sasoptpy.Model.add_constraints`</span>
<span class="sd">    :func:`sasoptpy.Model.include`</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argv</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_condict</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_conlist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="n">GeneratorType</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_recursive_add_cons</span><span class="p">(</span><span class="n">argv</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">condict</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_condict</span><span class="p">,</span>
                                     <span class="n">conlist</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_conlist</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">check_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;con&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_objorder</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="ConstraintGroup.get_name"><a class="viewcode-back" href="../../api/generated/sasoptpy.ConstraintGroup.get_name.html#sasoptpy.ConstraintGroup.get_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Returns the name of the constraint group</span>

<span class="sd">            Returns</span>
<span class="sd">            -------</span>
<span class="sd">            name : string</span>
<span class="sd">                Name of the constraint group</span>

<span class="sd">            Examples</span>
<span class="sd">            --------</span>

<span class="sd">            &gt;&gt;&gt; m = so.Model(name=&#39;m&#39;)</span>
<span class="sd">            &gt;&gt;&gt; x = m.add_variable(name=&#39;x&#39;)</span>
<span class="sd">            &gt;&gt;&gt; indices = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span>
<span class="sd">            &gt;&gt;&gt; y = m.add_variables(indices, name=&#39;y&#39;)</span>
<span class="sd">            &gt;&gt;&gt; c1 = m.add_constraints((x + y[i] &lt;= 4 for i in indices),</span>
<span class="sd">                                       name=&#39;con1&#39;)</span>
<span class="sd">            &gt;&gt;&gt; print(c1.get_name())</span>
<span class="sd">            con1</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span></div>

    <span class="k">def</span> <span class="nf">_recursive_add_cons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argv</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">condict</span><span class="p">,</span> <span class="n">conlist</span><span class="p">,</span> <span class="n">ckeys</span><span class="o">=</span><span class="p">()):</span>
        <span class="n">conctr</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">transfer_allowed</span><span class="p">:</span>
            <span class="n">argv</span><span class="o">.</span><span class="n">gi_frame</span><span class="o">.</span><span class="n">f_globals</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">_transfer</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
                <span class="n">newkeys</span> <span class="o">=</span> <span class="n">ckeys</span> <span class="o">+</span> <span class="p">(</span><span class="n">idx</span><span class="p">,)</span>
            <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span> <span class="o">==</span> <span class="n">GeneratorType</span><span class="p">:</span>
                <span class="n">newkeys</span> <span class="o">=</span> <span class="p">()</span>
                <span class="k">if</span> <span class="n">argv</span><span class="o">.</span><span class="n">gi_code</span><span class="o">.</span><span class="n">co_nlocals</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">vnames</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">gi_code</span><span class="o">.</span><span class="n">co_cellvars</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">vnames</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">gi_code</span><span class="o">.</span><span class="n">co_varnames</span>
                <span class="n">vdict</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">gi_frame</span><span class="o">.</span><span class="n">f_locals</span>
                <span class="k">for</span> <span class="n">ky</span> <span class="ow">in</span> <span class="n">vnames</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">ky</span> <span class="o">!=</span> <span class="s1">&#39;.0&#39;</span><span class="p">:</span>
                        <span class="n">newkeys</span> <span class="o">=</span> <span class="n">newkeys</span> <span class="o">+</span> <span class="p">(</span><span class="n">vdict</span><span class="p">[</span><span class="n">ky</span><span class="p">],)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR: Unknown argument type for constraint generation&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">argv</span><span class="p">))</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="n">keylist</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">_to_iterator_expression</span><span class="p">(</span><span class="n">newkeys</span><span class="p">)</span>
            <span class="n">conname</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">[</span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">keylist</span><span class="p">))</span>
            <span class="n">conname</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">check_name</span><span class="p">(</span><span class="n">conname</span><span class="p">,</span> <span class="s1">&#39;con&#39;</span><span class="p">)</span>
            <span class="n">newcon</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">exp</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">conname</span><span class="p">,</span> <span class="n">crange</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">_range</span><span class="p">)</span>
            <span class="n">condict</span><span class="p">[</span><span class="n">newkeys</span><span class="p">]</span> <span class="o">=</span> <span class="n">newcon</span>
            <span class="n">conlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newkeys</span><span class="p">)</span>
            <span class="n">conctr</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_con_info</span><span class="p">()</span>

<div class="viewcode-block" id="ConstraintGroup.get_expressions"><a class="viewcode-back" href="../../api/generated/sasoptpy.ConstraintGroup.get_expressions.html#sasoptpy.ConstraintGroup.get_expressions">[docs]</a>    <span class="k">def</span> <span class="nf">get_expressions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns constraints as a list of expressions</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        rhs : boolean, optional</span>
<span class="sd">            Whether to pass the constant part (rhs) of the constraint or not</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        df : :class:`pandas.DataFrame`</span>
<span class="sd">            Returns a DataFrame consisting of constraints as expressions</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>

<span class="sd">        &gt;&gt;&gt; m = so.Model(name=&#39;m&#39;)</span>
<span class="sd">        &gt;&gt;&gt; var_ind = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]</span>
<span class="sd">        &gt;&gt;&gt; u = m.add_variables(var_ind, name=&#39;u&#39;)</span>
<span class="sd">        &gt;&gt;&gt; t = m.add_variable(name=&#39;t&#39;)</span>
<span class="sd">        &gt;&gt;&gt; cg = so.ConstraintGroup((u[i] + 2 * t &lt;= 5 for i in var_ind),</span>
<span class="sd">                                    name=&#39;cg&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ce = cg.get_expressions()</span>
<span class="sd">        &gt;&gt;&gt; print(ce)</span>
<span class="sd">                     cg</span>
<span class="sd">        a  u[a] + 2 * t</span>
<span class="sd">        b  u[b] + 2 * t</span>
<span class="sd">        c  u[c] + 2 * t</span>
<span class="sd">        d  u[d] + 2 * t</span>
<span class="sd">        &gt;&gt;&gt; ce_rhs = cg.get_expressions(rhs=True)</span>
<span class="sd">        &gt;&gt;&gt; print(ce_rhs)</span>
<span class="sd">                         cg</span>
<span class="sd">        a  u[a] + 2 * t - 5</span>
<span class="sd">        b  u[b] + 2 * t - 5</span>
<span class="sd">        c  u[c] + 2 * t - 5</span>
<span class="sd">        d  u[d] + 2 * t - 5</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_condict</span><span class="p">:</span>
            <span class="n">cd</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_condict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">rhs</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">cd</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_linCoef</span><span class="p">[</span><span class="s1">&#39;CONST&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">cd_df</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">dict_to_frame</span><span class="p">(</span><span class="n">cd</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">cd_df</span></div>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overloaded method to access individual constraints</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        key : string or int</span>
<span class="sd">            Key of the constraint</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        item : Constraint</span>
<span class="sd">            Reference to the constraint</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">tuple_pack</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_condict</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_conlist</span><span class="p">:</span>
            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_condict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_set_con_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_condict</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_condict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">_set_info</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_condict</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_defn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tabs</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">key_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_conlist</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">tabs</span> <span class="o">+</span> <span class="s1">&#39;con </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">_to_optmodel_loop</span><span class="p">(</span><span class="n">key_</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">keys</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39; : &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_condict</span><span class="p">[</span><span class="n">key_</span><span class="p">]</span><span class="o">.</span><span class="n">_defn</span><span class="p">()</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a representation string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;Constraint Group (</span><span class="si">{}</span><span class="s1">) [</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_condict</span><span class="p">):</span>
            <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_condict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;  [</span><span class="si">{}</span><span class="s1">: </span><span class="si">{}</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sasoptpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">tuple_unpack</span><span class="p">(</span><span class="n">k</span><span class="p">),</span>
                                       <span class="n">v</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;]&#39;</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a string representation of the object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;sasoptpy.ConstraintGroup([&#39;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_condict</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">, &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_condict</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;], &#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;name=</span><span class="se">\&#39;</span><span class="si">{}</span><span class="se">\&#39;</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<span id="version_switch">
<select onchange="chooseVersion(this);" style="background-color: transparent; color: black; min-width: 33%; margin: 0px 0px 10px 10px;">
<option value="latest">Latest</option>
<option value="1.0.0">1.0.0</option>
<option value="0.2.1">0.2.1</option>
<option value="0.2.0">0.2.0</option>
<option value="0.1.2">0.1.2</option>
<option value="0.1.1">0.1.1</option>
<option value="0.1.0">0.1.0</option>
</select>
</span>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input-data.html">Handling Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../models.html">Sessions and Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../components.html">Model components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../workflow.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web-api.html">RESTful API</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../http-routingtable.html" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">sasoptpy 0.2.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017-2019, SAS Institute.
      Last updated on Feb 26, 2019 (Timestamp: 0.2.1-20190226133646).
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.
    </div>
  </body>
</html>